@use "utilities" as *;

.modal {
  --transition-duration: 400ms;

  width: 100%;
  height: 100%;
  max-width: 100%;
  max-height: 100%;
  color: currentColor;
  background: none;
  border: none;
  padding-block: toRem($container-padding-s);
  margin: 0;
  overflow: auto;
  z-index: 1001;
  opacity: 0;
  transform: translate3d(0, -5%, 0);
  filter: blur(4px);
  transition:
    opacity calc(var(--transition-duration) / 2) calc(var(--transition-duration) / 4),
    transform var(--transition-duration) ease-out,
    filter calc(var(--transition-duration) / 2) ease-out,
    display var(--transition-duration) allow-discrete;

  @include adaptiveValue("padding-inline", $container-padding-s, 15);
  @include backdrop($zIndex: 999);

  &::backdrop {
    display: none;
  }
  // .modal[open]
  &[open] {
    opacity: 1;
    transform: translate3d(0, 0, 0);
    filter: blur(0);
    transition:
      opacity calc(var(--transition-duration) / 2),
      transform var(--transition-duration) ease,
      filter calc(var(--transition-duration) / 2) calc(var(--transition-duration) / 2);

    @starting-style {
      opacity: 0;
      transform: translate3d(0, -5%, 0);
      filter: blur(4px);
    }
  }
  // .modal__wrapper
  &__wrapper {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: auto;
    min-height: 100%;
  }
  // .modal__window
  &__window {
    display: flex;
    flex-direction: column;
    gap: toRem(32);
    width: 100%;
    max-width: toRem(400);
    padding-block: toRem(32);
    background-color: $dark-color;
    border-radius: toRem(10);
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);

    @include adaptiveValue("padding-inline", 32, 15, $bp-mobile);
  }
  // .modal__header
  &__header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    gap: toRem(32);
  }
  // .modal__title
  &__title {
    font-size: 1.5rem;
    line-height: 1;
    color: $text-heading-color;
  }
  // .modal__close-btn
  &__close-btn {
    position: relative;
    flex-shrink: 0;
    width: toRem(24);
    height: toRem(24);
    color: $text-heading-color;
    transition: color 250ms;

    // .modal__close-btn::after
    &::after,
    // .modal__close-btn::before
    &::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      translate: 0 -50%;
      display: block;
      height: toRem(3);
      background-color: currentColor;
      border-radius: 0.625rem;
    }
    // .modal__close-btn::after
    &::after {
      transform: rotate(45deg);
    }
    // .modal__close-btn::before
    &::before {
      transform: rotate(-45deg);
    }
    // .modal__close-btn:hover
    @include hover() {
      color: $accent-color;
    }
  }
  // .modal--full
  &--full & {
    // .modal--full .modal__wrapper
    &__wrapper {
      height: 100%;
    }
    // .modal--full .modal__window
    &__window {
      height: 100%;
      max-width: 100%;
    }
    // .modal--full .modal__title
    &__title {
      position: relative;
      z-index: 1;
    }
    // .modal--full .modal__close-btn
    &__close-btn {
      z-index: 1;
    }
    // .modal--full .modal__body
    &__body {
      position: absolute;
      inset: 0;
      height: 100%;
    }
  }
}
